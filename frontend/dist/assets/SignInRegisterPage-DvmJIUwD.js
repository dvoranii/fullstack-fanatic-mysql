import{r as L,z,g as A,A as K,B as I,D as O,E as U,J as Z,y as D,d as r,j as e,c as t,L as T,K as M,M as N,n as S,H as Y,P as H}from"./index-BcVzZ_lP.js";const J=(o=!1)=>{const[n,c]=L.useState(o),[s,i]=L.useState(null),[j,v]=L.useState(!1),{setProfile:h,setFavouriteTutorials:a,setFavouriteBlogs:m,setComments:x,setPurchasedItems:d}=z(),p=A();return{isLogin:n,error:s,setError:i,toggleForm:()=>{c(!n),i(null),p(n?"/register":"/login")},handleGoogleRegister:async u=>{try{if((await K(u.access_token)).status===409){i("This Google account is already registered. Please log in.");return}await I(h,a,m,x,d,i),p("/my-account")}catch(l){console.error("Error during Google registration:",l),i("Google registration failed.")}},handleGoogleLogin:async u=>{try{await O(u.access_token),await I(h,a,m,x,d,i),p("/my-account")}catch(l){console.error("Error during Google login:",l),i("Google login failed.")}},handleRegisterSubmit:async u=>{u.preventDefault();const l=document.getElementById("email").value,f=document.getElementById("password").value,w=document.getElementById("confirm-password").value,G=document.getElementById("username").value,$=[{value:G,type:"username"},{value:l,type:"email"},{value:f,type:"password"},{value:w,compareValue:f,type:"confirmPassword"}];for(const y of $){const F=D(y);if(F){i(F);return}}try{await U({email:l,password:f,name:G}),await I(h,a,m,x,d,i),p("/my-account")}catch(y){if(y instanceof Error)try{const F=JSON.parse(y.message);i(F.message)}catch{i(y.message)}else i("Registration failed. Please try again.");console.error("Error during registration:",y)}},handleLoginSubmit:async u=>{u.preventDefault();const l=document.getElementById("login-username").value,f=document.getElementById("login-password").value;if(!l){i("Please enter your username.");return}if(!f){i("Please enter your password.");return}try{const{token:w}=await Z({username:l,password:f});localStorage.setItem("accessToken",w),await I(h,a,m,x,d,i),p("/my-account")}catch(w){console.error("Error during login:",w),i("User not found or incorrect password.")}},isTermsAccepted:j,setIsTermsAccepted:v}},V={primary:"#14213d"},q=`
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 8px;
  border: 2px solid ${V.primary};
`,Q=r.div.withConfig({displayName:"InputFieldstyled__InputWrapper",componentId:"sc-hlu0as-0"})(["display:flex;flex-direction:column;"]),X=r.label.withConfig({displayName:"InputFieldstyled__Label",componentId:"sc-hlu0as-1"})(['font-family:"ZenKakuGothicNewRegular";display:block;font-size:0.8rem;margin-bottom:0.4rem;font-weight:bold;']),ee=r.input.withConfig({displayName:"InputFieldstyled__Input",componentId:"sc-hlu0as-2"})(["",' &::placeholder{font-family:"ZenKakuGothicNewRegular";}'],q),b=({label:o,type:n,id:c,placeholder:s})=>e.jsxs(Q,{children:[e.jsx(X,{htmlFor:c,children:o}),e.jsx(ee,{type:n,id:c,placeholder:s})]}),oe="/assets/google-signin-icon-BORsquzr.png",te=r.button.withConfig({displayName:"GoogleAuthButtonstyled__GoogleSignInButton",componentId:"sc-18f4bub-0"})(['border:none;padding:8px 16px;display:flex;justify-content:center;align-items:center;font-family:"ZenKakuGothicNewMedium";width:fit-content;margin:0 auto;border-radius:20px;transition:all 150ms ease;background-color:#ffffff;img{margin-right:10px;width:25px;}&:hover{background-color:#357ae8;color:whitesmoke;cursor:pointer;}']),E=({handleClick:o,text:n})=>e.jsxs(te,{onClick:o,children:[e.jsx("img",{src:oe,alt:"Google Icon"}),e.jsx("span",{children:n})]}),re=r.button.withConfig({displayName:"SubmitButtonstyled__SubmitButton",componentId:"sc-1r4vf12-0"})(["padding:10px;background-color:",";font-size:1.2rem;text-transform:uppercase;width:fit-content;margin:10px auto;border:none;border-radius:12px;cursor:pointer;color:",";font-weight:bold;box-shadow:0px 4px 8px rgba(20,33,61,0.4);user-select:none;transition:all 150ms ease;span{color:",";text-shadow:-1px -1px 0 ",",1px -1px 0 ",",-1px 1px 0 ",",1px 1px 0 ",";letter-spacing:2px;}&:hover{transform:translateY(-2px);box-shadow:0px 4px 10px rgba(20,33,61,0.3);}&:active{transform:translateY(0);box-shadow:0px 4px 8px rgba(20,33,61,0.4);}"],t.secondary,t.white,t.white,t.black,t.black,t.black,t.black),B=({text:o})=>e.jsx(re,{type:"submit",children:e.jsx("span",{children:o})}),ne="/assets/check-icon-7c1BLhta.png",ie=r.div.withConfig({displayName:"TermsCheckboxstyled__TermsWrapper",componentId:"sc-12a8sx2-0"})(['display:flex;align-items:center;justify-content:center;margin:12px 0 10px;input[type="checkbox"]{display:none;}label{font-size:0.8rem;position:relative;padding-left:29px;display:flex;align-items:center;.checkbox-label{cursor:pointer;margin-right:5px;user-select:none;}.terms-link{color:',';text-decoration:underline;cursor:pointer;pointer-events:auto;user-select:none;}&:hover::before{cursor:pointer;}}label::before{content:"";width:20px;height:20px;border:2px solid #ccc;border-radius:4px;display:inline-block;position:absolute;left:0;top:50%;transform:translateY(-50%);background-color:',';}label::after{content:"";display:none;position:absolute;left:7%;top:6%;transform:translate(-50%,-50%);width:30px;height:30px;background-image:url(',');background-size:contain;background-repeat:no-repeat;pointer-events:none;}input[type="checkbox"]:checked + label::after{display:block;}'],t.primary,t.white,ne),se=({isChecked:o,onChange:n})=>{const c=s=>{n(s.target.checked)};return e.jsxs(ie,{children:[e.jsx("input",{type:"checkbox",id:"terms-register",checked:o,onChange:c}),e.jsxs("label",{htmlFor:"terms-register",children:[e.jsx("span",{className:"checkbox-label",children:"I accept"}),e.jsx(T,{to:"/terms-conditions",className:"terms-link",children:"terms & conditions"})]})]})},ae=`
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 8px;
  border: 2px solid ${t.primary};
`,le=r.div.withConfig({displayName:"RegisterLoginFormstyled__RegisterLoginFormOuter",componentId:"sc-1iil6o8-0"})(["height:100%;display:flex;align-items:center;justify-content:center;position:relative;margin-top:-40px;"]),ce=r.div.withConfig({displayName:"RegisterLoginFormstyled__RegisterLoginFormWrapperInner",componentId:"sc-1iil6o8-1"})(["width:clamp(450px,40vw,600px);background-color:",";border-radius:40px;margin:10vh auto;overflow:hidden;height:725px;position:relative;transition:all 0.25s ease-in-out;"],({$isLogin:o})=>o?t.primary:t.background),P=r.form.withConfig({displayName:"RegisterLoginFormstyled__Form",componentId:"sc-1iil6o8-2"})(["display:flex;flex-direction:column;padding:20px 60px;width:100%;"]),de=r.div.withConfig({displayName:"RegisterLoginFormstyled__RegisterFormWrapperInner",componentId:"sc-1iil6o8-3"})(["display:flex;flex-direction:column;height:100%;justify-content:center;"]);r.label.withConfig({displayName:"RegisterLoginFormstyled__FormLabel",componentId:"sc-1iil6o8-4"})(['font-family:"ZenKakuGothicNewRegular";display:block;font-size:0.8rem;margin-bottom:0.4rem;font-weight:bold;']);r.input.withConfig({displayName:"RegisterLoginFormstyled__Input",componentId:"sc-1iil6o8-5"})(["",' &::placeholder{font-family:"ZenKakuGothicNewRegular";}'],ae);r.button.withConfig({displayName:"RegisterLoginFormstyled__SubmitButton",componentId:"sc-1iil6o8-6"})(["padding:10px;background-color:",";font-size:1.2rem;text-transform:uppercase;width:fit-content;margin:10px auto;border:none;border-radius:12px;cursor:pointer;color:",";font-weight:bold;box-shadow:0px 4px 8px rgba(20,33,61,0.4);span{color:",";-webkit-text-fill-color:",";-webkit-text-stroke:1px;}"],t.secondary,t.white,t.primary,t.white);const k=r.h2.withConfig({displayName:"RegisterLoginFormstyled__FormTitle",componentId:"sc-1iil6o8-7"})(['font-family:"ZenKakuGothicNewMedium";color:',";text-transform:uppercase;text-align:center;margin-bottom:",";font-size:",";transition:all 150ms ease;transition-delay:",";user-select:none;"],t.primary,({$isLogin:o})=>o?"40px":"20px",({$isLogin:o})=>o?"1.5rem":"1.2rem",({$isLogin:o})=>o?"250ms":"0ms"),pe=r.div.withConfig({displayName:"RegisterLoginFormstyled__RegisterFormTitleWrapper",componentId:"sc-1iil6o8-8"})(["padding-top:20px;cursor:",";","{font-size:",";color:",";margin-top:-1.4rem;letter-spacing:1.4px;transition-delay:0ms;&:hover{color:",";}}"],({$isLogin:o})=>o?"pointer":"default",k,({$isLogin:o})=>o?"1.2rem":"1.6rem",({$isLogin:o})=>o?t.background:t.primary,({$isLogin:o})=>o?t.secondary:t.primary),ge=r.div.withConfig({displayName:"RegisterLoginFormstyled__LoginFormTitleWrapper",componentId:"sc-1iil6o8-9"})(["padding:18px;border-top-right-radius:80px;border-top-left-radius:80px;cursor:pointer;transition:all 150ms ease;","{font-size:",";color:",";margin-bottom:0px;transition:all 250ms ease;}&:hover{background-color:",";","{color:",";}}"],k,({$isLogin:o})=>o?"1.6rem":"1.2rem",({$isLogin:o})=>o?`${t.primary}`:`${t.white}`,t.secondary,k,t.primary),me=r.div.withConfig({displayName:"RegisterLoginFormstyled__LoginFormWrapperOuter",componentId:"sc-1iil6o8-10"})(["background:",";position:absolute;top:",";width:100%;height:100%;border-top-right-radius:76px;border-top-left-radius:76px;transition:top 0.5s ease-in-out;"],({$isLogin:o})=>o?t.background:t.primary,({$isLogin:o})=>o?"10%":"91%"),ue=r.div.withConfig({displayName:"RegisterLoginFormstyled__LoginFormWrapperInner",componentId:"sc-1iil6o8-11"})(["display:flex;flex-direction:column;"]),W=r.div.withConfig({displayName:"RegisterLoginFormstyled__Divider",componentId:"sc-1iil6o8-12"})(['display:flex;align-items:center;text-align:center;margin:20px 0;color:#999;font-family:"ZenKakuGothicNewRegular",sans-serif;font-size:0.8rem;&::before,&::after{content:"";flex:1;border-bottom:1px solid #999;}&::before{margin-right:0.5em;}&::after{margin-left:0.5em;}']);r.button.withConfig({displayName:"RegisterLoginFormstyled__GoogleSignInButton",componentId:"sc-1iil6o8-13"})(['border:none;padding:8px 16px;display:flex;justify-content:center;align-items:center;font-family:"ZenKakuGothicNewMedium";width:fit-content;margin:0 auto;border-radius:20px;transition:all 150ms ease;img{margin-right:10px;width:25px;}&:hover{background-color:#357ae8;color:whitesmoke;cursor:pointer;}']);const he=r.div.withConfig({displayName:"RegisterLoginFormstyled__ForgotPasswordLinkWrapper",componentId:"sc-1iil6o8-14"})(["text-align:center;margin-top:10px;"]),xe=r(T).withConfig({displayName:"RegisterLoginFormstyled__ForgotPasswordLink",componentId:"sc-1iil6o8-15"})(["cursor:pointer;transition:all 250ms ease;border-bottom:1px solid transparent;padding-bottom:2px;&:hover{border-bottom:1px solid ",";}"],t.primary),fe=({defaultToLogin:o=!1})=>{const{isLogin:n,error:c,toggleForm:s,handleGoogleRegister:i,handleGoogleLogin:j,handleRegisterSubmit:v,handleLoginSubmit:h,setError:a,isTermsAccepted:m,setIsTermsAccepted:x}=J(o),d=M();L.useEffect(()=>{(d.pathname==="/login"&&!n||d.pathname==="/register"&&n)&&s()},[d,n,s]);const p=N({onSuccess:i,onError:g=>{a("Google authentication failed"),console.log(g)}}),R=N({onSuccess:j,onError:g=>{a("Google authentication failed"),console.log(g)}}),_=g=>{if(g.preventDefault(),a(null),!m){a("Please accept the terms and conditions");return}p()},C=g=>{g.preventDefault(),a(null),R()};return e.jsx(le,{children:e.jsxs(ce,{$isLogin:n,children:[e.jsx(P,{onSubmit:v,noValidate:!0,children:e.jsxs(de,{children:[e.jsx(pe,{$isLogin:n,onClick:n?s:void 0,children:e.jsx(k,{$isLogin:n,children:"Register"})}),e.jsx(b,{label:"Username",type:"text",id:"username",placeholder:"Enter a username"}),e.jsx(b,{label:"Email",type:"email",id:"email",placeholder:"abc@email.com"}),e.jsx(b,{label:"Password",type:"password",id:"password",placeholder:"*****"}),e.jsx(b,{label:"Confirm Password",type:"password",id:"confirm-password",placeholder:"*****"}),e.jsx(se,{isChecked:m,onChange:x}),e.jsx(B,{text:"Register"}),e.jsx(S,{message:c,type:"error"}),e.jsx(W,{children:"OR"}),e.jsx(E,{handleClick:_,text:"Register with Google"})]})}),e.jsxs(me,{$isLogin:n,children:[e.jsx(ge,{$isLogin:n,onClick:s,children:e.jsx(k,{$isLogin:n,children:"Login"})}),e.jsx(ue,{children:e.jsxs(P,{onSubmit:h,children:[e.jsx(b,{label:"Username",type:"text",id:"login-username",placeholder:"Username"}),e.jsx(b,{label:"Password",type:"password",id:"login-password",placeholder:"*****"}),e.jsx(B,{text:"Login"}),e.jsx(S,{message:c,type:"error"}),e.jsx(he,{children:e.jsx(xe,{to:"/forgot-password",children:"Forgot Password?"})}),e.jsx(W,{children:"OR"}),e.jsx(E,{handleClick:C,text:"Sign in with Google"})]})})]})]})})},we=({defaultToLogin:o})=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Sign In/Register - Full Stack Fanatic"}),e.jsx("meta",{name:"description",content:"Sign in to or register for your Full Stack Fanatic user account."})]}),e.jsx(H,{children:e.jsx(fe,{defaultToLogin:o})})]});export{we as default};
